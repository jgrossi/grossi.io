<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <title>Creating your first Composer/Packagist package | Junior Grossi</title>
  <meta name="description" content="Today I'll write about how you can contribute with PHP community creating packages (or updating your's) using Composer and Packagist. First, if you're a PHP ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://grossi.io/2013/creating-your-first-composer-packagist-package">
  <link rel="alternate" type="application/atom+xml" title="Junior Grossi" href="http://grossi.io/feed.xml" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-24490124-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Junior Grossi </a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Creating your first Composer/Packagist package</h1>
    <p class="post-meta">Mar 6, 2013</p>
  </header>

  <article class="post-content">
    <p>Hi everybody! Today I'll write about how you can contribute with PHP community creating packages (or updating your's) using <a href="http://getcomposer.org">Composer</a> and <a href="http://packagist.org">Packagist</a>. First, if you're a PHP developer and don't know yet what is Composer, take a look on the post <a href="http://juniorgrossi.com/why-you-should-use-composer-and-how-to-start-using-it/">Why you should use Composer and how to start using it</a> to get more information about.</p>
<h2>Using Composer</h2>
<p>Composer is a package manager for PHP. You can <strong>use</strong> packages the community developed and you can <strong>contribute</strong> with your packages too. Here I'll show how to create a project/package, install Composer inside it and send to Packagist, where others developers can use it inside their projects. <a id="more"></a><a id="more-590"></a></p>
<h2>Creating the Package</h2>
<p>You can create a new project or update one to use Composer. I'll create a hello world class. It's a simple class but you can create complex projects and share them with the others developers. I'll use <strong>"hello-world"</strong> as project's name. Composer work in <strong>"vendor/package"</strong> name format. Here we can set as "vendor" name my name: <em>"juniorgrossi"</em> and as package name <em>"hello-world"</em>, the name of the project.</p>
<h3>Files Structure</h3>
<p>You can put all files inside the main dir, but I strongly recommend to create another dir, as <strong>"src"</strong> to be easier to understand and maintain your code organized. The project structure will start with the follow: * hello-world (root dir) * src * HelloWorld * SayHello.php Our SayHello.php file will have:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 

<span class="k">namespace</span> <span class="nx">HelloWorld</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SayHello</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">world</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;Hello World, Composer!&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3>Starting Composer</h3>
<p>As our project is ready we can "install" Composer inside it. This is only create a <strong>"composer.json"</strong> file inside root dir, but Composer can do that for you. Inside your project root: composer init You'll have the follow Composer response:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nx">macbook</span><span class="o">:</span><span class="nx">hello</span><span class="o">-</span><span class="nx">world</span> <span class="nx">grossi</span><span class="err">$</span> <span class="nx">composer</span> <span class="nx">init</span>


  <span class="nx">Welcome</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">Composer</span> <span class="nx">config</span> <span class="nx">generator</span>  



<span class="k">This</span> <span class="nx">command</span> <span class="nx">will</span> <span class="nx">guide</span> <span class="nx">you</span> <span class="nx">through</span> <span class="nx">creating</span> <span class="nx">your</span> <span class="nx">composer</span><span class="o">.</span><span class="nx">json</span> <span class="nx">config</span><span class="o">.</span>

<span class="nx">Package</span> <span class="nx">name</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">vendor</span><span class="o">&gt;/&lt;</span><span class="nx">name</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">[</span><span class="nx">juniorgrossi</span><span class="o">/</span><span class="nx">hello</span><span class="o">-</span><span class="nx">world</span><span class="p">]</span><span class="o">:</span>
 <span class="nx">You</span> <span class="nx">can</span> <span class="nx">accept</span> <span class="nx">the</span> <span class="k">default</span> <span class="k">or</span> <span class="nx">customize</span> <span class="nx">it</span> <span class="nx">like</span> <span class="s2">&quot;yourname/hello&quot;</span> <span class="k">or</span> <span class="nx">what</span> <span class="nx">you</span> <span class="nx">want</span><span class="o">.</span> <span class="nx">Complete</span> <span class="nx">all</span> <span class="nx">Composer</span> <span class="nx">questions</span> <span class="nx">like</span><span class="o">:</span> 

<span class="nx">Package</span> <span class="nx">name</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">vendor</span><span class="o">&gt;/&lt;</span><span class="nx">name</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">[</span><span class="nx">juniorgrossi</span><span class="o">/</span><span class="nx">hello</span><span class="o">-</span><span class="nx">world</span><span class="p">]</span><span class="o">:</span> <span class="nx">juniorgrossi</span><span class="o">/</span><span class="nx">hello</span><span class="o">-</span><span class="nx">world</span>
<span class="nx">Description</span> <span class="p">[]</span><span class="o">:</span> <span class="nx">My</span> <span class="nx">first</span> <span class="nx">Composer</span> <span class="nx">project</span>
<span class="nx">Author</span> <span class="p">[</span><span class="nx">Junior</span> <span class="nx">Grossi</span> <span class="o">&lt;</span><span class="nx">me</span><span class="o">@</span><span class="nx">juniorgrossi</span><span class="o">.</span><span class="nx">com</span><span class="o">&gt;</span><span class="p">]</span><span class="o">:</span> <span class="nx">Your</span> <span class="nx">Name</span> <span class="o">&lt;</span><span class="nx">your</span><span class="o">@</span><span class="nx">name</span><span class="o">.</span><span class="nx">com</span><span class="o">&gt;</span>
<span class="nx">Minimum</span> <span class="nx">Stability</span> <span class="p">[]</span><span class="o">:</span> <span class="nx">dev</span>

<span class="nx">Define</span> <span class="nx">your</span> <span class="nx">dependencies</span><span class="o">.</span>

<span class="nx">Would</span> <span class="nx">you</span> <span class="nx">like</span> <span class="nx">to</span> <span class="nb">define</span> <span class="nx">your</span> <span class="nx">dependencies</span> <span class="p">(</span><span class="k">require</span><span class="p">)</span> <span class="nx">interactively</span> <span class="p">[</span><span class="nx">yes</span><span class="p">]</span><span class="o">?</span> <span class="nx">no</span>
<span class="nx">Would</span> <span class="nx">you</span> <span class="nx">like</span> <span class="nx">to</span> <span class="nb">define</span> <span class="nx">your</span> <span class="nx">dev</span> <span class="nx">dependencies</span> <span class="p">(</span><span class="k">require</span><span class="o">-</span><span class="nx">dev</span><span class="p">)</span> <span class="nx">interactively</span> <span class="p">[</span><span class="nx">yes</span><span class="p">]</span><span class="o">?</span> <span class="nx">no</span>

<span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;juniorgrossi/hello-world&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;My first Composer project&quot;</span><span class="p">,</span>
    <span class="s2">&quot;authors&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Your Name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;your@name.com&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;minimum-stability&quot;</span><span class="o">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
    <span class="s2">&quot;require&quot;</span><span class="o">:</span> <span class="p">{</span>

    <span class="p">}</span>
<span class="p">}</span>

<span class="k">Do</span> <span class="nx">you</span> <span class="nx">confirm</span> <span class="nx">generation</span> <span class="p">[</span><span class="nx">yes</span><span class="p">]</span><span class="o">?</span> <span class="nx">yes</span>
 <span class="nx">Now</span> <span class="nx">you</span> <span class="nx">have</span> <span class="s2">&quot;composer.json&quot;</span> <span class="nb">file</span> <span class="nx">saved</span> <span class="nx">in</span> <span class="nx">your</span> <span class="nx">root</span> <span class="nb">dir</span><span class="o">.</span> <span class="nx">It</span><span class="err">&#39;</span><span class="nx">s</span> <span class="nx">almost</span> <span class="nx">ready</span> <span class="nx">but</span> <span class="nx">we</span> <span class="nx">must</span> <span class="k">do</span> <span class="nx">some</span> <span class="nx">changes</span><span class="o">:</span> 

<span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;juniorgrossi/hello-world&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;My first Composer project&quot;</span><span class="p">,</span>
    <span class="s2">&quot;authors&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Your Name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;your@name.com&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;minimum-stability&quot;</span><span class="o">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
    <span class="s2">&quot;require&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;php&quot;</span><span class="o">:</span> <span class="s2">&quot;&gt;=5.3.0&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;autoload&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;psr-0&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;HelloWorld&quot;</span><span class="o">:</span> <span class="s2">&quot;src/&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>What we did here is add information about PHP 5.3 as minimum requirements (<strong>require</strong> section) and tell Composer to <strong>"autoload"</strong> (using <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a>) all files with "HelloWorld" namespace that are inside "src" dir.</p>
<h3>Testing Package</h3>
<p>Shure we want to do a simple test to verify if our class is working well. You can create a new project and "paste" your classes inside it or test inside your own project, wich is better and easier. We're creating a Composer project so we must have Composer files installed inside our projects. So, install it running <strong>"composer install"</strong> inside your root dir:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nx">composer</span> <span class="nx">install</span></code></pre></div>

<p>As you have only "php &gt;=5.3.0" inside "composer.json", Composer will install only it's own files. With Composer installed create a directory "tests" inside your root dir. Create the "test.php" file inside it with the follow content:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 

<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span> <span class="c1">// Autoload files using Composer autoload</span>

<span class="k">use</span> <span class="nx">HelloWorld\SayHello</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">SayHello</span><span class="o">::</span><span class="na">world</span><span class="p">();</span>
 <span class="nx">Go</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">terminal</span> <span class="p">(</span><span class="k">or</span> <span class="nx">create</span> <span class="nx">a</span> <span class="nx">PHP</span> <span class="nx">web</span> <span class="nx">server</span> <span class="nx">inside</span> <span class="s2">&quot;tests&quot;</span> <span class="nb">dir</span><span class="p">)</span> <span class="k">and</span> <span class="nx">type</span><span class="o">:</span> 

<span class="nx">php</span> <span class="nx">tests</span><span class="o">/</span><span class="nx">test</span><span class="o">.</span><span class="nx">php</span></code></pre></div>

<p>You'll get <em>"Hello World, Composer!"</em>. It's working now.</p>
<h3>Sending to Packagist.org</h3>
<p>Now your project is working and you want to send it to Packagist. The easy way is push your project to <a href="http://github.com">Github</a> using Git. Go to Github and create a new public repo called <strong>"helloworld"</strong>, start the Git project inside your root dir and push it:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nx">git</span> <span class="nx">init</span> 
<span class="nx">git</span> <span class="nx">add</span> <span class="o">.</span> 
<span class="nx">git</span> <span class="nx">commit</span> <span class="o">-</span><span class="nx">m</span> <span class="s2">&quot;First commit&quot;</span> 
<span class="nx">git</span> <span class="nx">remote</span> <span class="nx">add</span> <span class="nx">origin</span> <span class="nx">git</span><span class="o">@</span><span class="nx">github</span><span class="o">.</span><span class="nx">com</span><span class="o">:</span><span class="nx">username</span><span class="o">/</span><span class="nx">helloworld</span><span class="o">.</span><span class="nx">git</span> 
<span class="nx">git</span> <span class="nx">push</span> <span class="nx">origin</span> <span class="nx">master</span></code></pre></div>

<p>Now you have your project inside a Github repo and you're ready to send it to Packagist. Go to <a href="http://packagist.org">Packagist web site</a>, create your account, login and <strong>Submit a Package</strong>. Packagist'll ask you for <em>Repository URL (Git/Svn/Hg)</em>. Paste there <strong>git@github.com:username/helloworld.git</strong> and click "Check!". Packagist will check your project and return the project name. If it's correct accept it.</p>
<h3>Packagist Details</h3>
<p>Every time you do a new commit to Github you must update the Packagist. Go to your account, your package and click "Force Update!". Packagist will go to Github and update the sources. You can turn on "auto update" going to your Github repo, clicking "Settings", after "Service Hooks" and click the "Packagist" service. There update with your information, like:</p>
<ul>
<li><strong>User:</strong> your Packagist username, like <em>juniorgrossi</em></li>
<li><strong>Token:</strong> your API token, that you can find inside your Packagist settings link</li>
<li><strong>Domain:</strong> <em>packagist.org</em> Ok! Auto update finished and your package is available to other developers. </li>
</ul>
<p>Our first Composer package is finished, but you can do much more using it. Thanks!</p>

  </article>

  
  <div class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'grossi-io'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <!-- <h2 class="footer-heading">Junior Grossi</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <p>
          <a href="http://grossi.io">
            <img src="http://www.gravatar.com/avatar/7bb3a66a199daec275d5ad339724c754.png?s=100" alt="Junior Grossi">
          </a>
        </p>
        <ul class="contact-list">
          <li>Junior Grossi</li>
          <li><a href="mailto:juniorgro@gmail.com">juniorgro@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jgrossi">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">jgrossi</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/junior_grossi">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">junior_grossi</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">This is my blog about web development in general. I write about PHP (Wordpress, Laravel, etc), Ruby (Rails, Jekyll), NodeJS (Socket) and more. Be welcome and let your comment :-)
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
